import{m as O,h as w,D as R,q as F,s as v,r as i,o as S,j,k as a,e as c,f as l,v as u,x as p,b as o}from"./app-32ca278b.js";const A={class:"space-x-4"},N={class:"grid grid-cols-2 gap-6"},$={class:"col-span-2"},D={class:"col-span-2 sm:col-span-1"},E={class:"col-span-2 sm:col-span-1"},G={name:"ConfigUserPermission"},P=Object.assign(G,{setup(H){const b=O(),d=w(),n=R("$trans"),f="config/permission/",t=F(f),g={action:"",users:[],permissions:[]};v({});const r=v({...g}),V=[{label:n("general.assign"),value:"assign"},{label:n("general.revoke"),value:"revoke"}],B=async m=>await d.dispatch("config/permission/search",{query:m}).then(s=>s).catch(s=>{}),C=async m=>await d.dispatch("config/permission/searchUser",{query:m}).then(s=>s).catch(s=>{});return(m,s)=>{const U=i("BaseButton"),h=i("CardHeader"),k=i("BaseRadioGroup"),_=i("BaseSelect"),y=i("FormAction"),x=i("ConfigPage");return S(),j(x,null,{action:a(()=>[c("div",A,[l(U,{onClick:s[0]||(s[0]=e=>o(b).push({name:"ConfigPermission"}))},{default:a(()=>[u(p(o(n)("config.permission.role_permission")),1)]),_:1})])]),default:a(()=>[l(y,{"no-card":"","init-url":f,action:"userWiseAssign","init-form":g,form:r,"reset-form":"","keep-adding":!1},{default:a(()=>[l(h,{first:"",title:o(n)("config.permission.user_permission_config"),description:o(n)("config.permission.user_permission_info")},null,8,["title","description"]),c("div",N,[c("div",$,[l(k,{options:V,name:"action",modelValue:r.action,"onUpdate:modelValue":s[1]||(s[1]=e=>r.action=e),error:o(t).action,"onUpdate:error":s[2]||(s[2]=e=>o(t).action=e),horizontal:""},null,8,["modelValue","error"])]),c("div",D,[l(_,{modelValue:r.users,"onUpdate:modelValue":s[3]||(s[3]=e=>r.users=e),filterResults:!1,minChars:1,resolveOnLoad:!1,delay:500,multiple:"",name:"users","value-prop":"uuid",options:async function(e){return await C(e)},label:o(n)("global.select",{attribute:o(n)("user.user")}),error:o(t).users,"onUpdate:error":s[4]||(s[4]=e=>o(t).users=e)},{selectedOption:a(e=>[u(p(e.value.profile.name)+" ("+p(e.value.email)+") ",1)]),listOption:a(e=>[u(p(e.option.profile.name)+" ("+p(e.option.email)+") ",1)]),_:1},8,["modelValue","options","label","error"])]),c("div",E,[l(_,{modelValue:r.permissions,"onUpdate:modelValue":s[5]||(s[5]=e=>r.permissions=e),filterResults:!1,minChars:1,resolveOnLoad:!1,delay:500,multiple:"",name:"permissions",options:async function(e){return await B(e)},label:o(n)("global.select",{attribute:o(n)("config.permission.permission")}),error:o(t).permissions,"onUpdate:error":s[6]||(s[6]=e=>o(t).permissions=e)},null,8,["modelValue","options","label","error"])])])]),_:1},8,["form"])]),_:1})}}});export{P as default};
