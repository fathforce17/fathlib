import{u as U,m as q,h as I,y as H,s as C,I as S,t as z,r as n,o as s,j as y,k as r,O as B,e as i,a as o,z as g,F as p,d as h,f as c,v as w,x as u,b as M}from"./app-32ca278b.js";const E={class:"space-x-4"},T={class:"overflow-hidden border border-gray-200 dark:border-gray-700 sm:rounded-lg"},W={key:0,class:"table min-w-full divide-y divide-gray-200 dark:divide-gray-700"},G={class:"bg-gray-50 dark:bg-neutral-700"},J={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},K={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},Q={class:"bg-white dark:bg-dark-body divide-y divide-gray-200 dark:divide-gray-700"},X={class:"text-sm text-gray-500 dark:text-gray-400 pl-6 py-2"},Y={class:"text-sm text-gray-500 dark:text-gray-400 pl-6 py-2"},Z={name:"ConfigPermissionAssign"},te=Object.assign(Z,{setup(ee){const _=U(),k=q(),P=I(),m=H(!1),b="config/permission/",d=C({modules:[]}),a={selectedModule:"",assignedPermissions:[]},l=C({...a}),V=e=>{k.push({name:"ConfigPermissionAssignModule",params:{module:e}})},v=async()=>{m.value=!0,await P.dispatch(b+"preRequisite",{data:_.params.module||"general"}).then(e=>{m.value=!1,Object.assign(d,{modules:e.modules,selectedModule:e.selectedModule,roles:e.roles}),a.selectedModule=e.selectedModule,a.assignedPermissions=e.assignedPermissions,Object.assign(l,B(a))}).catch(e=>{m.value=!1})};return S(()=>_.params.module,e=>{a.selectedModule=e,Object.assign(l,B(a)),v()}),z(()=>{v()}),(e,x)=>{const A=n("DropdownItem"),$=n("DropdownButton"),D=n("BaseButton"),j=n("CardHeader"),F=n("BaseCheckbox"),O=n("BaseLoader"),R=n("FormAction"),L=n("ConfigPage");return s(),y(L,null,{action:r(()=>[i("div",E,[d.modules.length?(s(),y($,{key:0,direction:"down",label:e.$trans("module."+d.selectedModule)},{default:r(()=>[(s(!0),o(p,null,g(d.modules,t=>(s(),o("div",{key:t.value},[t.value!=M(_).params.module?(s(),y(A,{key:0,as:"span",onClick:f=>V(t.value)},{default:r(()=>[w(u(t.label),1)]),_:2},1032,["onClick"])):h("",!0)]))),128))]),_:1},8,["label"])):h("",!0),c(D,{onClick:x[0]||(x[0]=t=>M(k).push({name:"ConfigUserPermission"}))},{default:r(()=>[w(u(e.$trans("config.permission.user_permission")),1)]),_:1})])]),default:r(()=>[c(R,{"no-card":"","init-url":b,action:"roleWiseAssign","init-form":a,form:l,"stay-on":""},{default:r(()=>[c(j,{first:"",title:e.$trans("config.permission.permission_config"),description:e.$trans("config.permission.permission_info")},null,8,["title","description"]),c(O,{"is-loading":m.value},{default:r(()=>[i("div",T,[l.assignedPermissions.length?(s(),o("table",W,[i("thead",G,[i("tr",null,[i("th",J,u(e.$trans("config.permission.permission")),1),(s(!0),o(p,null,g(d.roles,t=>(s(),o("th",K,u(t.label),1))),256))])]),i("tbody",Q,[(s(!0),o(p,null,g(l.assignedPermissions,t=>(s(),o("tr",{key:t.name},[i("td",X,u(t.name),1),(s(!0),o(p,null,g(t.roles,f=>(s(),o("td",Y,[c(F,{modelValue:f.isAssigned,"onUpdate:modelValue":N=>f.isAssigned=N},null,8,["modelValue","onUpdate:modelValue"])]))),256))]))),128))])])):h("",!0)])]),_:1},8,["is-loading"])]),_:1},8,["form"])]),_:1})}}});export{te as default};
